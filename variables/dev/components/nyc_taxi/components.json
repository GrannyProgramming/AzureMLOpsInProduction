{
  "component_filepaths": {
    "base_path": "./data_science/nyc_taxi/src/"
    },
    "environments": {
      "sklearn": {
        "env": "azureml:AzureML-sklearn-0.24-ubuntu18.04-py37-cpu@latest"
      },
      "pytorch": {
        "env": "AzureML-pytorch-1.10-ubuntu18.04-py38-cuda11-gpu@latest"
      }
    },
  "resources": {
    "instance_count": 2
    },
  "distribution": {
    "mpi": {
      "process_count_per_instance": 1
    },
    "pytorch": {
      "process_count_per_instance": 1
    },
    "tensorflow": {
      "process_count_per_instance": {"reference": "resources.instance_count"},
      "worker_count": 1,
      "parameter_server_count": 0
    }
  },
  "input_and_output_types": {
    "number": {
      "type": "number",
      "optional": true,
      "min": 0,
      "max": 1
    },
    "integer": {
      "type": "integer",
      "optional": true,
      "min": 0,
      "max": 1
    },
    "boolean": {
      "type": "boolean",
      "optional": false
    },
    "string": { 
      "type": "string",
      "enum": ["a", "b", "c"],
      "optional": false
    },
    "uri_file": {
      "type": "uri_file",
      "optional": false
    },
    "uri_folder": {
      "type": "uri_folder",
      "optional": false
    },
    "mltable": {
      "type": "mltable",
      "optional": false
    },
    "mlflow_model": {
      "type": "mlflow_model",
      "optional": false
    }
  },
  "components_framework": {
    "train":{
      "name": "train_linear_regression_model",
      "filepath": "train.py",
      "inputs": {
        "train_data": {"reference": "input_and_output_types.uri_folder"},
        "test_split_ratio": {"reference": "input_and_output_types.number", "default": "0.2"}
        }, 
        "outputs": {
          "model_output": {"reference": "input_and_output_types.mlflow_model"},
          "test_data": {"reference": "input_and_output_types.uri_folder"}
        },
      "env": {"reference": "environments.pytorch"},
      "resources": {"reference": "resources.instance_count"},
      "distribution": {"reference": "distribution.pytorch"}
    }
  }
}



